(self["webpackChunkproject1"]=self["webpackChunkproject1"]||[]).push([[94],{9094:function(t,e,l){"use strict";l.r(e),l.d(e,{default:function(){return c}});var r=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[l("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),l("el-breadcrumb-item",[t._v("权限管理")])],1),l("el-button",{staticStyle:{"margin-top":"16px"},attrs:{type:"primary"},on:{click:t.userAdd}},[t._v("添加角色")]),l("el-card",{staticClass:"box-card"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rolelist}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[l("el-row",{staticStyle:{"border-bottom":"1px solid"}},[l("el-col",{attrs:{span:6,offset:4}},[l("div",{staticClass:"grid-content bg-purple-dark"},[e.row.right[0]?l("el-tag",{attrs:{closable:""},on:{close:function(l){return t.tagClose(e.row.id,0)}}},[t._v("用户及权限管理")]):t._e()],1)]),l("el-col",{attrs:{span:14}},[l("div",{staticClass:"grid-content bg-purple-dark"},[e.row.right[3]?l("el-tag",{attrs:{type:"success",closable:""},on:{close:function(l){return t.tagClose(e.row.id,3)}}},[t._v("用户增删")]):t._e(),e.row.right[4]?l("el-tag",{attrs:{type:"success",closable:""},on:{close:function(l){return t.tagClose(e.row.id,4)}}},[t._v("权限增删")]):t._e(),e.row.right[5]?l("el-tag",{attrs:{type:"success",closable:""},on:{close:function(l){return t.tagClose(e.row.id,5)}}},[t._v("角色增删")]):t._e()],1)])],1),l("el-row",{staticStyle:{"border-bottom":"1px solid"}},[l("el-col",{attrs:{span:6,offset:4}},[l("div",{staticClass:"grid-content bg-purple-dark"},[e.row.right[1]?l("el-tag",{attrs:{closable:""},on:{close:function(l){return t.tagClose(e.row.id,1)}}},[t._v("商品管理")]):t._e()],1)]),l("el-col",{attrs:{span:14}},[l("div",{staticClass:"grid-content bg-purple-dark"},[e.row.right[6]?l("el-tag",{attrs:{type:"success",closable:""},on:{close:function(l){return t.tagClose(e.row.id,6)}}},[t._v("商品增删")]):t._e()],1)])],1),l("el-row",{staticStyle:{"border-bottom":"1px solid"}},[l("el-col",{attrs:{span:6,offset:4}},[l("div",{staticClass:"grid-content bg-purple-dark"},[e.row.right[2]?l("el-tag",{attrs:{closable:""},on:{close:function(l){return t.tagClose(e.row.id,2)}}},[t._v("订单管理")]):t._e()],1)]),l("el-col",{attrs:{span:14}},[l("div",{staticClass:"grid-content bg-purple-dark"},[e.row.right[7]?l("el-tag",{attrs:{closable:"",type:"success"},on:{close:function(l){return t.tagClose(e.row.id,7)}}},[t._v("订单增删")]):t._e(),e.row.right[8]?l("el-tag",{attrs:{closable:"",type:"success"},on:{close:function(l){return t.tagClose(e.row.id,8)}}},[t._v("订单下载")]):t._e()],1)])],1)],1)]}}])}),l("el-table-column",{attrs:{label:"id",prop:"id"}}),l("el-table-column",{attrs:{label:"角色",prop:"role"}}),l("el-table-column",{attrs:{label:"角色描述",prop:"title"}}),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[l("div",[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.edit(r.id)}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.del(r.id)}}}),l("el-button",{attrs:{type:"warning",icon:"el-icon-s-help",size:"mini"},on:{click:function(e){return t.rightsChange(r.id)}}})],1)]}}])})],1)],1),l("el-dialog",{attrs:{title:"添加角色",visible:t.userAddDialog,width:"60%"},on:{close:t.userAddDialogClose,"update:visible":function(e){t.userAddDialog=e}}},[t._v(" 角色名称:"),l("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:t.roleName,callback:function(e){t.roleName=e},expression:"roleName"}}),t._v(" 角色描述:"),l("el-input",{attrs:{placeholder:"请输入角色描述"},model:{value:t.roleDes,callback:function(e){t.roleDes=e},expression:"roleDes"}}),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{staticStyle:{"margin-top":"16px"},on:{click:t.userAddDialogClose}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:t.addRole}},[t._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:"修改角色",visible:t.userEditDialog,width:"50%"},on:{close:t.userEditDialogClose,"update:visible":function(e){t.userEditDialog=e}}},[t._v(" 角色名称:"),l("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:t.roleName,callback:function(e){t.roleName=e},expression:"roleName"}}),t._v(" 角色描述:"),l("el-input",{attrs:{placeholder:"请输入角色描述"},model:{value:t.roleDes,callback:function(e){t.roleDes=e},expression:"roleDes"}}),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{staticStyle:{"margin-top":"20px"},on:{click:t.userEditDialogClose}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:t.editRole}},[t._v("确 定")])],1)],1),t.rightsDialog?l("el-dialog",{attrs:{title:"权限管理",visible:t.rightsDialog,width:"30%"},on:{"update:visible":function(e){t.rightsDialog=e}}},[l("el-tree",{ref:"rightsTree",attrs:{data:t.rights,"default-checked-keys":t.defrights,props:t.defaultProps,"node-key":"id","highlight-current":"","show-checkbox":"","default-expand-all":""}}),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.rightsDialog=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:t.rightsSet}},[t._v("确 定")])],1)],1):t._e()],1)},i=[],o=(l(561),{data:function(){return{rolelist:[{id:1,role:"超级管理员",title:"管理各种权限",right:[1,1,1,1,1,1,1,1,1]},{id:2,role:"运维",title:"运营维护",right:[0,1,1,0,0,0,1,1,1]},{id:3,role:"测试",title:"测试功能",right:[1,0,1,1,1,1,0,1,1]},{id:4,role:"开发",title:"开发功能",right:[1,1,0,1,1,1,1,0,0]},{id:5,role:"设计",title:"设计功能",right:[1,0,0,1,1,1,0,0,0]},{id:6,role:"分析",title:"分析系统需求",right:[0,1,0,0,0,0,1,0,0]}],nextId:7,userAddDialog:!1,roleName:"",roleDes:"",userEditDialog:!1,rightsDialog:!1,roleId:"",rights:[{id:1,label:"用户及权限管理",children:[{id:4,label:"用户增删"},{id:5,label:"权限增删"},{id:6,label:"角色增删"}]},{id:2,label:"商品管理",children:[{id:7,label:"商品增删"}]},{id:3,label:"订单管理",children:[{id:8,label:"订单增删"},{id:9,label:"订单下载"}]}],defaultProps:{children:"children",label:"label"},defrights:[]}},methods:{tagClose:function(t,e){if(this.rolelist[t-1].right[e]=0,e<3)switch(e){case 0:this.rolelist[t-1].right[3]=0,this.rolelist[t-1].right[4]=0,this.rolelist[t-1].right[5]=0;break;case 1:this.rolelist[t-1].right[6]=0;break;case 2:this.rolelist[t-1].right[7]=0,this.rolelist[t-1].right[8]=0;break}else;},edit:function(t){this.roleId=t,this.roleName=this.rolelist[t-1].role,this.roleDes=this.rolelist[t-1].title,this.userEditDialog=!0},userEditDialogClose:function(){this.userEditDialog=!1},editRole:function(){this.userEditDialog=!1,this.rolelist[this.roleId-1].role=this.roleName,this.rolelist[this.roleId-1].title=this.roleDes,this.$message.success("角色编辑成功")},del:function(t){var e=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message({type:"error",message:"您没有权限!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},userAdd:function(){this.roleName="",this.roleDes="",this.userAddDialog=!0},userAddDialogClose:function(){this.roleName="",this.roleDes="",this.userAddDialog=!1},addRole:function(){this.userAddDialog=!1,this.rolelist.push({id:this.nextId,role:this.roleName,title:this.roleDes,right:[0,0,0,0,0,0,0,0,0]}),this.nextId++,this.$message.success("角色添加成功")},rightsChange:function(t){this.roleId=t;var e=0;this.defrights=[];for(var l=1;l<10;l++)1==this.rolelist[t-1].right[l-1]&&(this.defrights[e]=l,e++);console.log(this.defrights),this.rightsDialog=!0},rightsSet:function(){for(var t=[1,2,3,4,5,6,7,8,9],e=this.$refs.rightsTree.getCheckedKeys(),l=0;l<e.length;l++)t.splice(t.indexOf(e[l]),1);for(var r=0;r<e.length;r++)this.rolelist[this.roleId-1].right[e[r]-1]=1;for(var i=0;i<t.length;i++)this.rolelist[this.roleId-1].right[t[i]-1]=0;this.$message.success("修改成功"),console.log(e,t,this.rolelist[this.roleId-1].right),this.rightsDialog=!1}}}),s=o,a=l(1001),n=(0,a.Z)(s,r,i,!1,null,"1fc904da",null),c=n.exports},1194:function(t,e,l){var r=l(7293),i=l(5112),o=l(7392),s=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[],l=e.constructor={};return l[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},7475:function(t,e,l){var r=l(7854),i=l(3157),o=l(4411),s=l(111),a=l(5112),n=a("species"),c=r.Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,o(e)&&(e===c||i(e.prototype))?e=void 0:s(e)&&(e=e[n],null===e&&(e=void 0))),void 0===e?c:e}},5417:function(t,e,l){var r=l(7475);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},6135:function(t,e,l){"use strict";var r=l(4948),i=l(3070),o=l(9114);t.exports=function(t,e,l){var s=r(e);s in t?i.f(t,s,o(0,l)):t[s]=l}},3157:function(t,e,l){var r=l(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},561:function(t,e,l){"use strict";var r=l(2109),i=l(7854),o=l(1400),s=l(9303),a=l(6244),n=l(7908),c=l(5417),d=l(6135),u=l(1194),h=u("splice"),g=i.TypeError,f=Math.max,p=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!h},{splice:function(t,e){var l,r,i,u,h,m,y=n(this),D=a(y),w=o(t,D),_=arguments.length;if(0===_?l=r=0:1===_?(l=0,r=D-w):(l=_-2,r=p(f(s(e),0),D-w)),D+l-r>b)throw g(v);for(i=c(y,r),u=0;u<r;u++)h=w+u,h in y&&d(i,u,y[h]);if(i.length=r,l<r){for(u=w;u<D-r;u++)h=u+r,m=u+l,h in y?y[m]=y[h]:delete y[m];for(u=D;u>D-r+l;u--)delete y[u-1]}else if(l>r)for(u=D-r;u>w;u--)h=u+r-1,m=u+l-1,h in y?y[m]=y[h]:delete y[m];for(u=0;u<l;u++)y[u+w]=arguments[u+2];return y.length=D-r+l,i}})}}]);
//# sourceMappingURL=94.9f2f52f9.js.map